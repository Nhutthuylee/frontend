{"ast":null,"code":"// import { authHeader } from '../helps/auth-header';\nimport axios from 'axios';\nexport const userService = {\n  login\n};\n\nfunction login(username, password) {\n  // const requestOptions = {\n  //     method: 'POST',\n  //     headers: { 'Content-Type': 'application/json' },\n  //     body: JSON.stringify({ username, password })\n  // };\n  return axios({\n    method: \"POST\",\n    url: 'http://localhost:8080/users/authenticate',\n    data: {\n      username: username,\n      password: password\n    }\n  }).then(handleResponse).then(user => {\n    localStorage.setItem('user', JSON.stringify(user));\n    return user.data;\n  });\n}\n\nfunction handleResponse(response) {\n  return response.text().then(text => {\n    const data = text && JSON.parse(text);\n\n    if (!response.ok) {\n      if (response.status === 401) {\n        console.log(\"no ra 401 nhe\");\n      }\n\n      const error = data && data.message || response.statusText;\n      return Promise.reject(error);\n    }\n\n    return data;\n  });\n}","map":{"version":3,"sources":["E:/internship_2020_java_team_demo-feature-final-demo-Thuy/src/services/user.services.js"],"names":["axios","userService","login","username","password","method","url","data","then","handleResponse","user","localStorage","setItem","JSON","stringify","response","text","parse","ok","status","console","log","error","message","statusText","Promise","reject"],"mappings":"AAAA;AACA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAO,MAAMC,WAAW,GAAG;AACvBC,EAAAA;AADuB,CAApB;;AAIP,SAASA,KAAT,CAAeC,QAAf,EAAyBC,QAAzB,EAAmC;AAC/B;AACA;AACA;AACA;AACA;AACA,SAAOJ,KAAK,CAAC;AACLK,IAAAA,MAAM,EAAE,MADH;AAELC,IAAAA,GAAG,EAAE,0CAFA;AAGLC,IAAAA,IAAI,EAAE;AACFJ,MAAAA,QAAQ,EAAEA,QADR;AAEFC,MAAAA,QAAQ,EAAEA;AAFR;AAHD,GAAD,CAAL,CAOAI,IAPA,CAOKC,cAPL,EAQFD,IARE,CAQGE,IAAI,IAAI;AACVC,IAAAA,YAAY,CAACC,OAAb,CAAqB,MAArB,EAA6BC,IAAI,CAACC,SAAL,CAAeJ,IAAf,CAA7B;AACA,WAAOA,IAAI,CAACH,IAAZ;AACH,GAXE,CAAP;AAYH;;AAED,SAASE,cAAT,CAAwBM,QAAxB,EAAkC;AAC9B,SAAOA,QAAQ,CAACC,IAAT,GAAgBR,IAAhB,CAAqBQ,IAAI,IAAI;AAChC,UAAMT,IAAI,GAAGS,IAAI,IAAIH,IAAI,CAACI,KAAL,CAAWD,IAAX,CAArB;;AACA,QAAI,CAACD,QAAQ,CAACG,EAAd,EAAkB;AACd,UAAIH,QAAQ,CAACI,MAAT,KAAoB,GAAxB,EAA6B;AACzBC,QAAAA,OAAO,CAACC,GAAR,CAAY,eAAZ;AACH;;AAED,YAAMC,KAAK,GAAIf,IAAI,IAAIA,IAAI,CAACgB,OAAd,IAA0BR,QAAQ,CAACS,UAAjD;AACA,aAAOC,OAAO,CAACC,MAAR,CAAeJ,KAAf,CAAP;AACH;;AACD,WAAOf,IAAP;AACH,GAXM,CAAP;AAYH","sourcesContent":["// import { authHeader } from '../helps/auth-header';\r\nimport axios from 'axios';\r\nexport const userService = {\r\n    login\r\n}\r\n\r\nfunction login(username, password) {\r\n    // const requestOptions = {\r\n    //     method: 'POST',\r\n    //     headers: { 'Content-Type': 'application/json' },\r\n    //     body: JSON.stringify({ username, password })\r\n    // };\r\n    return axios({\r\n            method: \"POST\",\r\n            url: 'http://localhost:8080/users/authenticate',\r\n            data: {\r\n                username: username,\r\n                password: password\r\n            }\r\n        }).then(handleResponse)\r\n        .then(user => {\r\n            localStorage.setItem('user', JSON.stringify(user));\r\n            return user.data;\r\n        });\r\n}\r\n\r\nfunction handleResponse(response) {\r\n    return response.text().then(text => {\r\n        const data = text && JSON.parse(text);\r\n        if (!response.ok) {\r\n            if (response.status === 401) {\r\n                console.log(\"no ra 401 nhe\")\r\n            }\r\n\r\n            const error = (data && data.message) || response.statusText;\r\n            return Promise.reject(error);\r\n        }\r\n        return data;\r\n    })\r\n}"]},"metadata":{},"sourceType":"module"}