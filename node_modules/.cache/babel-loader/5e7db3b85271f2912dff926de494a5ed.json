{"ast":null,"code":"import { authHeader } from '../helps/auth-header';\nimport axios from 'axios';\nexport const userService = {\n  login\n};\n\nfunction login(username, password) {\n  const requestOptions = {\n    method: 'POST',\n    url: 'http://localhost:8080/users/authenticate',\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify({\n      username,\n      password\n    })\n  };\n  return axios({\n    requestOptions\n  }).then(handleResponse).then(user => {\n    localStorage.setItem('user', JSON.stringify(user));\n    return user;\n  });\n}\n\nfunction handleResponse(response) {\n  return response.text().then(text => {\n    const data = text && JSON.parse(text);\n\n    if (!response.ok) {\n      if (response.status === 401) {\n        console.log(\"no ra 401 nhe\");\n      }\n\n      const error = data && data.message || response.statusText;\n      return Promise.reject(error);\n    }\n\n    return data;\n  });\n}","map":{"version":3,"sources":["E:/internship_2020_java_team_demo-feature-final-demo-Thuy/src/services/user.services.js"],"names":["authHeader","axios","userService","login","username","password","requestOptions","method","url","headers","body","JSON","stringify","then","handleResponse","user","localStorage","setItem","response","text","data","parse","ok","status","console","log","error","message","statusText","Promise","reject"],"mappings":"AAAA,SAASA,UAAT,QAA2B,sBAA3B;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAO,MAAMC,WAAW,GAAG;AACvBC,EAAAA;AADuB,CAApB;;AAIP,SAASA,KAAT,CAAeC,QAAf,EAAyBC,QAAzB,EAAmC;AAC/B,QAAMC,cAAc,GAAG;AACnBC,IAAAA,MAAM,EAAE,MADW;AAEnBC,IAAAA,GAAG,EAAE,0CAFc;AAGnBC,IAAAA,OAAO,EAAE;AAAE,sBAAgB;AAAlB,KAHU;AAInBC,IAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;AAAER,MAAAA,QAAF;AAAYC,MAAAA;AAAZ,KAAf;AAJa,GAAvB;AAMA,SAAOJ,KAAK,CAAC;AAAEK,IAAAA;AAAF,GAAD,CAAL,CAA0BO,IAA1B,CAA+BC,cAA/B,EACFD,IADE,CACGE,IAAI,IAAI;AACVC,IAAAA,YAAY,CAACC,OAAb,CAAqB,MAArB,EAA6BN,IAAI,CAACC,SAAL,CAAeG,IAAf,CAA7B;AAEA,WAAOA,IAAP;AACH,GALE,CAAP;AAMH;;AAED,SAASD,cAAT,CAAwBI,QAAxB,EAAkC;AAC9B,SAAOA,QAAQ,CAACC,IAAT,GAAgBN,IAAhB,CAAqBM,IAAI,IAAI;AAChC,UAAMC,IAAI,GAAGD,IAAI,IAAIR,IAAI,CAACU,KAAL,CAAWF,IAAX,CAArB;;AACA,QAAI,CAACD,QAAQ,CAACI,EAAd,EAAkB;AACd,UAAIJ,QAAQ,CAACK,MAAT,KAAoB,GAAxB,EAA6B;AACzBC,QAAAA,OAAO,CAACC,GAAR,CAAY,eAAZ;AACH;;AAED,YAAMC,KAAK,GAAIN,IAAI,IAAIA,IAAI,CAACO,OAAd,IAA0BT,QAAQ,CAACU,UAAjD;AACA,aAAOC,OAAO,CAACC,MAAR,CAAeJ,KAAf,CAAP;AACH;;AACD,WAAON,IAAP;AACH,GAXM,CAAP;AAYH","sourcesContent":["import { authHeader } from '../helps/auth-header';\r\nimport axios from 'axios';\r\nexport const userService = {\r\n    login\r\n}\r\n\r\nfunction login(username, password) {\r\n    const requestOptions = {\r\n        method: 'POST',\r\n        url: 'http://localhost:8080/users/authenticate',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({ username, password })\r\n    };\r\n    return axios({ requestOptions }).then(handleResponse)\r\n        .then(user => {\r\n            localStorage.setItem('user', JSON.stringify(user));\r\n\r\n            return user;\r\n        });\r\n}\r\n\r\nfunction handleResponse(response) {\r\n    return response.text().then(text => {\r\n        const data = text && JSON.parse(text);\r\n        if (!response.ok) {\r\n            if (response.status === 401) {\r\n                console.log(\"no ra 401 nhe\")\r\n            }\r\n\r\n            const error = (data && data.message) || response.statusText;\r\n            return Promise.reject(error);\r\n        }\r\n        return data;\r\n    })\r\n}"]},"metadata":{},"sourceType":"module"}